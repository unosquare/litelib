<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>PocoData | Unosquare PocoData </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="PocoData | Unosquare PocoData ">
    <meta name="generator" content="docfx 2.42.0.0">
    
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="stylesheet" href="styles/docfx.vendor.css">
    <link rel="stylesheet" href="styles/docfx.css">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/bootstrap.min.css">
    <meta property="docfx:navrel" content="toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="">
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container-fluid">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="index.html">
                <img id="logo" class="logo" src="best-practices/resources/images/unosquare_logo.svg" alt="Unosquare">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar">
          <div class="container-fluid hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container-fluid body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container-fluid body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="pocodata">PocoData</h1>

<p>The no-frills micro ORM for SQL Server</p>
<p><a href="https://badge.fury.io/nu/PocoData.Sql"><img src="https://badge.fury.io/nu/PocoData.Sql.svg" alt="NuGet version"></a>
<span class="emoji" shortcode="star">⭐</span> <em>Please star this project if you like it</em></p>
<p>This library provides simplified access to data stores. Initially we only support SQL Server but the library can easily be extended to support other databases. Please not that data relations are not supported. You will need to implement those manually. Properties referencing other objects will not be persisted or mapped by this library. Only strings, enums and value types (along with their nullable counterparts) are supported.</p>
<p>The usage is straightforward. There are 2 separate NuGet packages: PocoData and PocoData.Sql. The packages have been spearated as sometimes you need a share data model class library across your applications. In that case you don&#39;t need to install the PocoData.Sql NuGet package in your shared class library. Only install the PocoData.Sql package in the project where you actually perform the data access.</p>
<p>You can create data models easily enough by adding attributes to your data model classes and their properties. For example.</p>
<pre><code class="lang-csharp">using System;
using Unosquare.PocoData.Annotations; // Make sure you import the namespace containing the data annotations.

[Table(&quot;Employees&quot;)]
public class Employee
{
    public Employee()
    {
        // a default constructor is not required but highly recommended.
    }

    [Key(true)] // Tells the mapper this property is part of a primary key and that its value is generated by the DB.
    public int EmployeeId { get; set; }

    [Required] // This string will be set as NOT NULL
    [StringLength(300)] // You can specify the string length. By default it is 255 characters.
    public string FullName { get; set; }

    public string EmailAddress { get; set; }

    public DateTime DateOfBirth { get; set; }

    public int? Children { get; set; }

    public MaritalStatus MaritalStatus { get; set; } // example of an enum (values will be stored as integers)

    public object Reserved { get; set; } // this will be ignored by the mapper.

    [NotMapped] // You can mark fields as not mapped.
    public int HashCode { get; set; }

    public override string ToString()
    {
        return $&quot;{EmployeeId} {FullName} {EmailAddress} {MaritalStatus} {DateOfBirth} {Children}&quot;;
    }
}
</code></pre><p>If you can&#39;t add attributes to existing classes, you could also use the fluent API</p>
<pre><code class="lang-csharp">typeof(Employee).Table().ToTable(&quot;Employees&quot;);
typeof(Employee).Column(nameof(Employee.EmployeeId)).IsGeneratedKeyColumn();
</code></pre><p>Create your database container class</p>
<pre><code class="lang-csharp">using System.Collections.Generic;
using System.Data.SqlClient;
using System.Threading.Tasks;
using Unosquare.PocoData.Sql;

public class SampleDb : SqlPocoDb
{
    public SampleDb()
        : base($&quot;Data Source=.; Integrated Security=True; Initial Catalog=pocodata; MultipleActiveResultSets=True;&quot;)
    {
        Employees = new EmployeesTable(this);
    }

    public EmployeesTable Employees { get; }

    // you could get a default table proxy for the type but this shows you
    // how to create your own table proxy with extended functionality.
    public class EmployeesTable : PocoTableProxy&lt;Employee&gt;
    {
        public EmployeesTable(IPocoDb db)
            : base(db, true)
        {
            // placeholder
        }

        public async Task&lt;IEnumerable&lt;Employee&gt;&gt; GetYoungEmployeesAsync()
        {
            var command = PocoDb.Connection.CreateCommand() as SqlCommand;
            command.CommandText = PocoDb.Commands.SelectAllCommandText(typeof(Employee)) + $&quot; WHERE YEAR(DateOfBirth) &gt;= @Year&quot;;
            command.AddParameter(&quot;@Year&quot;, 1990);

            return await SelectManyAsync(command);
        }
    }
}
</code></pre><p>Finally, use your database container class.</p>
<pre><code class="lang-csharp">using (var db = new SampleDb())
{
    var employees = new List&lt;Employee&gt;();
    employees.AddRange(await db.Employees.SelectAllAsync());

    var youngEmployees = await db.Employees.GetYoungEmployeesAsync();
    foreach (var e in youngEmployees)
        e.Children = null;

    var updates = await db.Employees.UpdateManyAsync(youngEmployees);
}
</code></pre></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="doc" align="center">
              <span class="small mobile-hide">
                <img id="logo" class="doc-logo" src="pocodata.png" alt="">
              </span>
            </div>
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li class="top-sep">
                    <a href="https://github.com/unosquare/pocodata/blob/master/README.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2017-2019 <a href="https://www.unosquare.com">Unosquare</a></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="styles/docfx.js"></script>
    <script type="text/javascript" src="styles/main.js"></script>
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-8535255-2', 'auto');
        ga('send', 'pageview');
    </script>
  </body>
</html>
